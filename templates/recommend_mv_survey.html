<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>당신이 원하는 영화는 어떤 영화인가요?</title>
  <style>
    /* 골드 테마 컬러 설정 */
    :root {
      --gold: #d4af37;         /* 메인 포인트 컬러 */
      --bg: #121212;           /* 배경 */
      --text: #eee;            /* 기본 텍스트 */
      --panel: #222;           /* 패널(폼 박스) */
      --gold-shadow: rgba(212, 175, 55, 0.6);
      --gold-shadow-strong: rgba(212, 175, 55, 0.9);
    }

    body {
      background: var(--bg);
      color: var(--text);
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      margin: 2em;
    }

    h1, h2 {
      color: var(--gold);
      text-align: center;
      margin-bottom: 0.5em;
      font-size: 3em;
    }

    form.survey {
      background: var(--panel);
      padding: 1.5em;
      border-radius: 12px;
      max-width: 850px;
      margin: 0 auto 3em auto;
      align-content: center;
      text-align: center;
      box-shadow: 0 4px 12px var(--gold-shadow);
    }

    fieldset {
      border: none;
      margin-bottom: 1.5em;
      padding: 1em;
    }

    legend {
      font-size: 28px;
      margin-bottom: 0.8em;
      font-weight: bold;
      color: var(--gold);
    }

    label {
      display: inline-block;
      margin: 0.3em 0.5em 0.3em 0;
      cursor: pointer;
      user-select: none;
    }

    /* 체크박스 숨기기 */
    input[type="checkbox"] {
      display: none;
    }

    /* 체크박스 커스텀 버튼 */
    label.checkbox-custom {
      display: inline-block;
      background-color: var(--gold);
      color: var(--bg);
      padding: 12px 25px;
      border-radius: 6px;
      font-weight: 800;
      font-size: 24px;
      box-shadow: 0 4px 8px var(--gold-shadow);
      transition: background-color 0.3s ease, color 0.3s ease, box-shadow 0.3s ease, transform .05s ease;
      user-select: none;
    }

    /* 체크 상태 */
    input[type="checkbox"]:checked + label.checkbox-custom {
      background-color: var(--bg);
      color: var(--gold);
      box-shadow: 0 6px 12px var(--gold-shadow-strong);
    }

    label.checkbox-custom:hover {
      background-color: #e0c15e; /* 골드 톤 밝게 */
      color: var(--bg);
      box-shadow: 0 6px 12px var(--gold-shadow-strong);
    }

    /* 라디오 숨기기 */
    input[type="radio"] {
      display: none;
    }

    /* 라디오 커스텀 버튼 */
    label.radio-custom {
      display: inline-block;
      background-color: var(--gold);
      color: var(--bg);
      padding: 12px 25px;
      border-radius: 6px;
      font-weight: 800;
      font-size: 24px;
      box-shadow: 0 4px 8px var(--gold-shadow);
      transition: background-color 0.3s ease, color 0.3s ease, box-shadow 0.3s ease, transform .05s ease;
      cursor: pointer;
      user-select: none;
    }

    input[type="radio"]:checked + label.radio-custom {
      background-color: var(--bg);
      color: var(--gold);
      box-shadow: 0 6px 12px var(--gold-shadow-strong);
    }

    label.radio-custom:hover {
      background-color: #e0c15e;
      color: var(--bg);
      box-shadow: 0 6px 12px var(--gold-shadow-strong);
    }

    /* 슬라이더 */
    input[type="range"] {
      width: 160px;
      margin-top: 0.3em;
      background: transparent; /* 투명 */
      -webkit-appearance: none; /* 크롬/사파리 기본 제거 */
      cursor: pointer;
    }

    /* 트랙 */
    input[type="range"]::-webkit-slider-runnable-track {
      width: 100%;
      height: 8px;
      background: var(--gold);
      border-radius: 6px;
      box-shadow: 0 0 5px var(--gold-shadow);
    }

    input[type="range"]::-moz-range-track {
      width: 100%;
      height: 8px;
      background: var(--gold);
      border-radius: 6px;
      box-shadow: 0 0 5px var(--gold-shadow);
    }

    /* 핸들 */
    input[type="range"]::-webkit-slider-thumb {
      -webkit-appearance: none;
      appearance: none;
      width: 24px;
      height: 24px;
      background: var(--bg);
      border: 2px solid var(--gold);
      border-radius: 50%;
      box-shadow: 0 0 8px var(--gold-shadow-strong);
      margin-top: -8px; /* 트랙 중앙 정렬 */
      transition: background-color 0.3s, box-shadow 0.3s;
    }

    input[type="range"]::-webkit-slider-thumb:hover {
      background-color: #1a1a1a;
      box-shadow: 0 0 12px var(--gold-shadow-strong);
    }

    input[type="range"]::-moz-range-thumb {
      width: 24px;
      height: 24px;
      background: var(--bg);
      border: 2px solid var(--gold);
      border-radius: 50%;
      box-shadow: 0 0 8px var(--gold-shadow-strong);
      transition: background-color 0.3s, box-shadow 0.3s;
    }

    input[type="range"]::-moz-range-thumb:hover {
      background-color: #1a1a1a;
      box-shadow: 0 0 12px var(--gold-shadow-strong);
    }

    /* output */
    output {
      display: inline-block;
      width: 40px;
      text-align: center;
      color: var(--gold);
      font-weight: 700;
      font-size: 1.3em;
      margin-left: 12px;
      user-select: none;
    }

    /* 제출 버튼 */
    button[type="submit"] {
      display: block;
      background: linear-gradient(135deg, var(--gold) 0%, #e0c15e 100%);
      color: var(--bg);
      border: none;
      border-radius: 8px;
      padding: 0.85em 3em;
      font-size: 1.5em;
      font-weight: bold;
      margin: 7em auto 0 auto;
      cursor: pointer;
      box-shadow: 0 4px 12px var(--gold-shadow);
      transition: background 0.3s ease, box-shadow 0.3s ease, transform .05s ease;
    }

    button[type="submit"]:hover {
      background: linear-gradient(135deg, #e0c15e 0%, var(--gold) 100%);
      box-shadow: 0 6px 16px var(--gold-shadow-strong);
    }

    /* 홈 버튼 전용 */
    .home-btn {
      all: unset;
      display: inline-block;
      background-color: var(--gold);
      color: var(--bg);
      padding: 14px 28px;
      border-radius: 6px;
      font-weight: 800;
      font-size: 24px;
      cursor: pointer;
      user-select: none;
      text-decoration: none;
      box-shadow: 0 4px 8px var(--gold-shadow);
      transition: background-color .2s ease, color .2s ease, box-shadow .2s ease, transform .05s ease;
    }

    .home-btn:hover {
      background-color: #e0c15e;
      color: var(--bg);
      box-shadow: 0 6px 12px var(--gold-shadow-strong);
    }

    .home-btn:active {
      transform: translateY(1px);
    }

    /* 제목 왼쪽 버튼 평행 배치 */
    .header-with-left-btn {
      position: relative;
      display: flex;
      justify-content: center; /* h1 중앙 */
      align-items: center;
      margin-bottom: 1em;
    }

    .header-with-left-btn .home-btn {
      position: absolute;
      left: 0;        /* 컨테이너의 가장 왼쪽 */
      top: 50%;
      transform: translateY(-50%);
    }
  </style>
</head>
<body>
  <div class="header-with-left-btn">
    <button class="home-btn" onclick="location.href='{{ url_for('index') }}'">홈으로</button>
    <h1>넷플릭스 산책 끝. 목적지 직행할 영화 한 편... 뭐로 할래?</h1>
  </div>

  <!-- 당신이 원하는 영화는 어떤 영화인가요 -->
  <form class="survey" method="POST" action="/recommend_mv">
    <!-- 1단계: 장르 선택 (중복 선택 가능) -->
    <fieldset>
      <legend>1. 장르 선택 (복수 선택 가능) — 직감 ON, 망설임 OFF</legend>

      <input type="checkbox" id="genre28" name="genres" value="28">
      <label for="genre28" class="checkbox-custom">액션</label>

      <input type="checkbox" id="genre12" name="genres" value="12">
      <label for="genre12" class="checkbox-custom">모험</label>

      <input type="checkbox" id="genre16" name="genres" value="16">
      <label for="genre16" class="checkbox-custom">애니메이션</label>

      <input type="checkbox" id="genre35" name="genres" value="35">
      <label for="genre35" class="checkbox-custom">코미디</label>

      <input type="checkbox" id="genre80" name="genres" value="80">
      <label for="genre80" class="checkbox-custom">범죄</label>

      <input type="checkbox" id="genre99" name="genres" value="99">
      <label for="genre99" class="checkbox-custom">다큐멘터리</label>

      <input type="checkbox" id="genre18" name="genres" value="18">
      <label for="genre18" class="checkbox-custom">드라마</label>

      <input type="checkbox" id="genre10751" name="genres" value="10751">
      <label for="genre10751" class="checkbox-custom">가족</label>

      <input type="checkbox" id="genre14" name="genres" value="14">
      <label for="genre14" class="checkbox-custom">판타지</label>

      <input type="checkbox" id="genre27" name="genres" value="27">
      <label for="genre27" class="checkbox-custom">공포</label>

      <input type="checkbox" id="genre10749" name="genres" value="10749">
      <label for="genre10749" class="checkbox-custom">로맨스</label>

      <input type="checkbox" id="genre878" name="genres" value="878">
      <label for="genre878" class="checkbox-custom">SF</label>

      <input type="checkbox" id="genre53" name="genres" value="53">
      <label for="genre53" class="checkbox-custom">스릴러</label>

      <input type="checkbox" id="genre10752" name="genres" value="10752">
      <label for="genre10752" class="checkbox-custom">전쟁</label>

      <input type="checkbox" id="genre37" name="genres" value="37">
      <label for="genre37" class="checkbox-custom">서부</label>

      <input type="checkbox" id="genre36" name="genres" value="36">
      <label for="genre36" class="checkbox-custom">역사</label>

      <input type="checkbox" id="genre10402" name="genres" value="10402">
      <label for="genre10402" class="checkbox-custom">음악</label>

      <input type="checkbox" id="genre9648" name="genres" value="9648">
      <label for="genre9648" class="checkbox-custom">미스터리</label>
    </fieldset>

    <!-- 2단계: 러닝 타임 선택 -->
    <fieldset>
      <legend>2. 러닝타임 — 간식 한 봉지 vs 두 봉지, 설마 세 봉지...?</legend>

      <input type="radio" id="runtime_1" name="runtime" value="1" required>
      <label for="runtime_1" class="radio-custom">1~2시간</label>

      <input type="radio" id="runtime_2" name="runtime" value="2">
      <label for="runtime_2" class="radio-custom">2~3시간</label>

      <input type="radio" id="runtime_3" name="runtime" value="3">
      <label for="runtime_3" class="radio-custom">3시간 이상</label>
    </fieldset>

    <!-- 3.: 평점 최소값 -->
    <fieldset>
      <legend>3. 최소 평점 — 과감하게 내리면 숨은 꿀잼 발견각</legend>
      <input type="range" name="min_rating" min="0" max="10" step="0.5" value="5" id="min_rating_slider" oninput="this.nextElementSibling.value = this.value">
      <output>5</output>
    </fieldset>

    <!-- 4. 선호하는 영화 언어 (복수 선택 가능) -->
    <fieldset>
      <legend>4. 언어 선택 — 글로벌 감성 ON, 현지감성 ON (복수 선택 가능)</legend>

      <input type="checkbox" id="lang_ko" name="languages" value="ko">
      <label for="lang_ko" class="checkbox-custom">한국어</label>

      <input type="checkbox" id="lang_en" name="languages" value="en">
      <label for="lang_en" class="checkbox-custom">영어</label>

      <input type="checkbox" id="lang_ja" name="languages" value="ja">
      <label for="lang_ja" class="checkbox-custom">일본어</label>
    </fieldset>

    <!-- 5. 개봉 일자 선택 -->
    <fieldset>
      <legend>5. 타임라인 픽 — 익숙한 맛 vs 새로운 맛, 지금의 나에겐?</legend>

      <input type="checkbox" id="year_before_2000" name="release_year_range" value="1">
      <label for="year_before_2000" class="checkbox-custom">2000년대 이전</label>

      <input type="checkbox" id="year_2000_2009" name="release_year_range" value="2">
      <label for="year_2000_2009" class="checkbox-custom">2000년대</label>

      <input type="checkbox" id="year_2010_2019" name="release_year_range" value="3">
      <label for="year_2010_2019" class="checkbox-custom">2010년대</label>

      <input type="checkbox" id="year_2020_2029" name="release_year_range" value="4">
      <label for="year_2020_2029" class="checkbox-custom">2020년대</label>
    </fieldset>

    <button type="submit">스크롤 끝, 추천 시작!</button>
  </form>

  <!-- 결과 확인 영역
  {% if genres %}
  <div class="result-area">
    <h2>선택한 결과</h2>
    <ul>
      <li>선택 장르   : {{genres | join(', ') }}</li>
      <li>러닝 타임   : {{runtime}}</li>
      <li>평점 최솟값 : {{min_rating}}</li>
      <li>선호 언어   : {{languages | join(', ') }}</li>
    </ul>
  </div>
  {% endif %}
</body>
</html>
