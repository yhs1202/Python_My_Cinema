<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>추천 영화 목록</title>
  <style>
    /* 골드 테마 컬러 */
    :root {
      --gold: #d4af37;                /* 포인트 컬러 */
      --bg: #121212;                  /* 배경 */
      --text: #eee;                   /* 기본 텍스트 */
      --panel: #222;                  /* 카드/패널 */
      --shadow: rgba(212,175,55,0.2);
      --shadow-strong: rgba(212,175,55,0.4);
      --badge-shadow: rgba(212,175,55,0.6);
    }

    body {
      background: var(--bg);
      color: var(--text);
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      margin: 0;
    }

    h1, h2 {
      color: var(--gold);
      text-align: center;
      margin-bottom: 0.5em;
    }

    /* 상단 액션 바: 좌측 정렬 */
    .action-bar {
      display: flex;
      justify-content: flex-start;
      gap: 10px;
      margin: 2em 0;
      padding: 0 1em;
    }
    .action-bar form { margin: 0; }

    /* 버튼 (골드 테마) */
    .checkbox-custom {
      display: inline-block;
      background-color: var(--gold);
      color: var(--bg);
      padding: 12px 25px;
      border-radius: 6px;
      font-weight: 800;
      font-size: 20px;
      box-shadow: 0 4px 8px var(--badge-shadow);
      transition: background-color 0.3s ease, color 0.3s ease, box-shadow 0.3s ease;
      user-select: none;
      cursor: pointer;
      border: none;
      text-decoration: none;
    }
    .checkbox-custom:hover {
      background-color: #e0c15e;
      color: var(--bg);
      box-shadow: 0 6px 12px var(--shadow-strong);
    }

    /* 카드 래퍼 */
    .card_wrapper {
      width: 100%;
      display: flex;
      justify-content: center;
      padding: 0 1em 2em;
      box-sizing: border-box;
    }

    /* 카드 그리드 */
    .cards {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      grid-gap: 1.2em;
      max-width: 1800px;
      margin: 0 auto;
      width: 100%;
    }

    /* 영화 카드 */
    .movie_card {
      background: var(--panel);
      color: var(--text);
      border-radius: 10px;
      box-shadow: 0 4px 12px var(--shadow);
      padding: 1em;
      text-align: center;
      transition: box-shadow 0.2s, color 0.2s;
      min-width: 0;
      font-size: 1.05em;
      height: -webkit-fill-available;
      overflow: hidden;
      display: block;
      flex-direction: column;
      justify-content: flex-start;
    }
    .movie_card:hover {
      box-shadow: 0 8px 24px var(--shadow-strong);
      color: var(--gold);
    }

    .movie_card h3 {
      margin-bottom: 0.8em;
      color: var(--gold);
      font-size: 1.6em;
    }

    .movie_card img.movie_poster {
      width: 100%;
      height: 480px;
      object-fit: contain;
      border-radius: 6px;
      margin-bottom: 1em;
      background: #111;
    }

    /* 정보 배지 */
    .info-box {
      display: inline-block;
      background-color: var(--gold);
      color: var(--bg);
      padding: 8px 16px;
      border-radius: 6px;
      font-weight: 750;
      font-size: 1.05em;
      margin: 0 0.5em 0.5em 0;
      box-shadow: 0 4px 8px var(--badge-shadow);
      cursor: default;
      letter-spacing: 0.03em;
      word-spacing: 0.1em;
    }

    .overview-box {
      display: block;
      max-height: 120%;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: pre-wrap;
      word-wrap: break-word;
    }

    /* 링크 스타일 */
    .movie_card_link,
    .movie_card_link:hover,
    .movie_card_link:visited {
      text-decoration: none;
      color: inherit;
    }

    /* 반응형 */
    @media (max-width: 1200px) {
      .cards { grid-template-columns: repeat(2, 1fr); }
    }
    @media (max-width: 700px) {
      .cards { grid-template-columns: 1fr; }
      .movie_card img.movie_poster { height: 360px; }
      .checkbox-custom { font-size: 18px; padding: 10px 18px; }
    }
  </style>
</head>
<body>
  <!-- 상단 좌측 정렬 버튼 바 -->
  <div class="action-bar">
    <form action="{{ url_for('index') }}" method="get">
      <button type="submit" class="checkbox-custom">홈으로</button>
    </form>
    <form action="{{ url_for('recommend_mv_survey') }}" method="get">
      <button type="submit" class="checkbox-custom">다시</button>
    </form>
  </div>

  <h1>당신이 원하는 영화 이곳에</h1>

  {% if movies %}
  <div class="card_wrapper">
    <div class="cards">
      {% for movie in movies %}
      <a href="{{ movie.id }}" target="_blank" rel="noopener noreferrer" class="movie_card_link">
        <div class="movie_card">
          <img src="{{ movie.poster_url }}" alt="{{ movie.title }} 포스터" class="movie_poster">
          <h3>{{ movie.title }}</h3>
          <p>
            <span class="info-box">장르: {{ movie.genre }}</span>
            <span class="info-box">평점: {{ movie.rating }}</span>
            <span class="info-box">언어: {{ movie.language }}</span>
          </p>
          <p>
            <span class="info-box overview-box"><strong>줄거리:</strong> {{ movie.overview }}</span>
          </p>
        </div>
      </a>
      {% endfor %}
    </div>
  </div>
  {% endif %}
</body>
</html>
